import{R as i,p as e,w as j}from"./chunk-4WY6JWTD-DFeZLFN5.js";import{C as p}from"./cancelsavebtn-CxQDzKWk.js";/* empty css            */function g(h){const[a,l]=i.useState(),[n,r]=i.useState();i.useEffect(()=>{fetch("http://localhost:5000/getall?table=staff_categories").then(t=>t.json()).then(t=>r(t))},[]);async function o(){if(console.log(a),!a?.first_name||!a?.last_name||!a?.birthday||!a?.sex||!a?.staff_category_id||!a?.email||!a?.phone){alert("Please fill out all required fields.");return}let t=!0;if(t=await(await fetch("http://localhost:5000/addstaff",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).json(),console.log(t),t.success){alert("Successfully added!");return}}return console.log(n),e.jsxs("div",{id:"add-staff-div",className:"modal-form-div",children:[e.jsx("div",{className:"gray-bg"}),e.jsxs("div",{className:"modal-form",id:"edit-details-div",style:{width:500},children:[e.jsx("div",{className:"modal-header-div",children:e.jsx("p",{className:"modal-header",children:"Add Staff"})}),e.jsxs("div",{className:"main-form-content",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"firstname",children:["First Name",e.jsx("input",{type:"text",id:"firstname",value:a?.first_name||"",onChange:t=>l({...a,first_name:t.target.value})})]}),e.jsxs("label",{htmlFor:"middlename",children:["Middle Name",e.jsx("input",{type:"text",id:"middlename",value:a?.middle_name||"",onChange:t=>l({...a,middle_name:t.target.value})})]}),e.jsxs("label",{htmlFor:"lastname",children:["Last Name",e.jsx("input",{type:"text",id:"lastname",value:a?.last_name||"",onChange:t=>l({...a,last_name:t.target.value})})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsxs("label",{htmlFor:"birthdate",children:["Birthdate",e.jsx("input",{type:"date",id:"birthdate",value:a?.birthday,onChange:t=>l({...a,birthday:t.target.value})})]}),e.jsxs("label",{style:{display:"block"},children:["Sex",e.jsxs("div",{id:"gender-div",children:[e.jsxs("div",{children:[e.jsx("input",{type:"radio",name:"gender",id:"female"}),e.jsx("label",{htmlFor:"female",children:"Female"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"radio",name:"gender",id:"male"}),e.jsx("label",{htmlFor:"male",children:"Male"})]})]})]})]}),e.jsxs("label",{htmlFor:"",children:["Role",e.jsx("select",{name:"",id:"",value:a?.staff_category_id,onChange:t=>l({...a,staff_category_id:t.target.value}),children:n?.map(t=>e.jsx("option",{value:t.staff_category_id,children:t.category_name}))})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"email",children:["Email",e.jsx("input",{type:"text",id:"email",value:a?.email,onChange:t=>l({...a,email:t.target.value})})]}),e.jsxs("label",{htmlFor:"phone",children:["Phone",e.jsx("input",{type:"text",id:"phone",value:a?.phone,onChange:t=>l({...a,phone:t.target.value})})]})]})]}),e.jsx(p,{hideForm:h.hideForm,submit:o})]})]})}const _=j(function(){const[a,l]=i.useState([]),[n,r]=i.useState(""),[o,t]=i.useState(!1);i.useEffect(()=>{fetch("http://localhost:5000/getstaffandcateg").then(s=>s.json()).then(s=>l(s))},[]);const c=a.filter(s=>{const m=`${s.first_name} ${s.last_name}`.toLowerCase(),f=s.category_name?.toLowerCase()||"",x=s.email?.toLowerCase()||"",u=s.phone?.toLowerCase()||"",d=n.toLowerCase();return m.includes(d)||f.includes(d)||x.includes(d)||u.includes(d)});return e.jsxs("div",{className:"route-page",children:[o&&e.jsx(g,{hideForm:()=>t(!1)}),e.jsx("h1",{className:"route-header",children:"Staff"}),e.jsx("p",{className:"route-page-desc",children:"Manage clinic staff, roles, and permissions"}),e.jsx("input",{type:"text",id:"staff-searchbar",placeholder:"Search staff by name, role, email or phone",value:n,onChange:s=>r(s.target.value)}),e.jsx("button",{onClick:()=>t(!0),children:"+ Add Staff"}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{id:"staff-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Role"}),e.jsx("th",{children:"Phone"}),e.jsx("th",{children:"Email"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:c.length>0?c.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.staff_id}),e.jsxs("td",{children:[s.first_name," ",s.last_name]}),e.jsx("td",{children:s.category_name}),e.jsx("td",{children:s.phone}),e.jsx("td",{children:s.email}),e.jsx("td",{children:e.jsx("i",{className:"bi bi-three-dots"})})]},s.staff_id)):e.jsx("tr",{children:e.jsx("td",{colSpan:6,style:{textAlign:"center",padding:"15px"},children:"No staff found"})})})]})})]})});export{_ as default};
