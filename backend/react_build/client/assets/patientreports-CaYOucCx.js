import{w as f,R as a,p as e}from"./chunk-4WY6JWTD-DFeZLFN5.js";import{R as u,P as g,a as y,C as v,T as _,L as b}from"./PieChart-DH9vA3dl.js";import"./index-BeDyGIcy.js";const w=f(function(){const[s,l]=a.useState({from_date:new Date().toISOString().split("T")[0],to_date:new Date().toISOString().split("T")[0]}),[i,o]=a.useState(),x=new Set(i?.map(t=>t.patient_id)).size,r=[];if(i?.length>0){const t={};i.forEach(n=>{t[n.service_name]=(t[n.service_name]||0)+1});for(const[n,j]of Object.entries(t))r.push({name:n,value:j})}a.useEffect(()=>{fetch(`http://localhost:5000/clinic_visits?fromdate=${s.from_date}&todate=${s.to_date}`).then(t=>t.json()).then(t=>o(t))},[]),a.useEffect(()=>{fetch(`http://localhost:5000/clinic_visits?fromdate=${s.from_date}&todate=${s.to_date}`).then(t=>t.json()).then(t=>o(t))},[s]);const d=["#4e79a7","#f28e2b","#e15759","#76b7b2","#59a14f","#edc949"];console.log(i),console.log(s);const c={border:"1px solid #ccc",borderRadius:"8px",padding:"20px",textAlign:"center",flex:1,margin:"10px",backgroundColor:"#f9f9f9"},p={display:"flex",flexDirection:"column",justifyContent:"space-around",margin:"20px 0",width:"30%"},m={display:"flex",flexDirection:"column",justifyContent:"space-around",margin:"20px 0",width:"70%"},h={fontSize:"2rem",fontWeight:"bold",margin:"10px 0"};return e.jsxs("div",{className:"route-page",children:[e.jsx("p",{className:"route-header",children:"Clinic Visit Reports"}),e.jsx("p",{className:"route-page-desc",children:"Track clinic visits, demographics, and health trends"}),e.jsxs("div",{style:{margin:"2rem 0",display:"flex",gap:"2rem"},children:[e.jsxs("label",{htmlFor:"",children:["From",e.jsx("input",{type:"date",value:s?.from_date,onChange:t=>l({...s,from_date:t.target.value})})]}),e.jsxs("label",{htmlFor:"",children:["To",e.jsx("input",{type:"date",value:s?.to_date,onChange:t=>l({...s,to_date:t.target.value})})]})]}),e.jsxs("div",{style:{display:"flex"},children:[e.jsxs("div",{style:p,children:[e.jsxs("div",{style:c,children:[e.jsx("div",{children:"Total Visits"}),e.jsx("div",{style:h,children:i?.length})]}),e.jsxs("div",{style:c,children:[e.jsx("div",{children:"No. of Patients Treated"}),e.jsx("div",{style:h,children:x})]})]}),e.jsx("div",{style:m,children:e.jsxs("div",{style:{width:"100%",height:350,margin:"0.5rem 0",padding:"2rem",border:"1px solid #ccc",backgroundColor:"#f9f9f9"},children:[e.jsx("h3",{children:"Visits by Service Type"}),e.jsx(u,{children:e.jsxs(g,{children:[e.jsx(y,{data:r,dataKey:"value",nameKey:"name",outerRadius:120,label:!0,children:r.map((t,n)=>e.jsx(v,{fill:d[n%d.length]},n))}),e.jsx(_,{}),e.jsx(b,{})]})})]})})]}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{children:[e.jsxs("tr",{children:[e.jsx("th",{children:"Patient"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Attending"}),e.jsx("th",{children:"Notes"})]}),i?.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.patient_name}),e.jsx("td",{children:t.service_name}),e.jsx("td",{children:t.visit_datetime}),e.jsx("td",{children:t.staff_name}),e.jsx("td",{children:t.notes})]}))]})})]})});export{w as default};
